<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>
<%@ taglib prefix="fmt" uri="http://java.sun.com/jsp/jstl/fmt" %>
<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<title>list</title>
	<link href="/resources/css/style.css" rel="stylesheet" type="text/css">

</head>
<body>
	<br>
	<h1 align="center">게시판</h1>
	
	<table>
		<tr>
			<td colspan ="5" align="left">
				<button onclick="window.location='/board/write'">글작성</button>
			</td>
		</tr>
		<tr>
			<td>NO. </td>
			<td>제목</td>
			<td>작성자</td>
			<td>작성일</td>
			<td>수정일</td>
		</tr>
	

	<%-- board : BoardVO 객체 담기는 변수
		item : 컨트롤러로부터 전달받은 LIST 리스트
			리스트의 요소 개수만큼 자동으로 반복하며,
			하나씩 꺼내서 board변수에 채워줌
	 --%>
	<c:forEach var = "board" items = "${list}">
		<tr>
			<td>${board.bno}</td>
			<td> <a href = "/board/content?bno=${board.bno}">  ${board.title } </a> </td>
			<td>${board.writer }</td>
			<td> <fmt:formatDate value="${board.regdate }" pattern = "yyyy-MM-dd"/> </td>
			<td><fmt:formatDate value="${board.updateDate }" pattern = "yyyy-MM-dd"/> </td>
		</tr>
	</c:forEach>
	</table>
	
	<script type="text/javascript">
		let result = "${result}";
		checkResult(result);
		
		//글작성 -> 리스트로 이동, alert이동, alert 뜬다 -> content 갔다 "브라우저 뒤로가기" -> alert 뜬다 (이상함)
		// 히스토리 삭제
		history.replaceState({}, null. null); // history 기록 조작
		
		function checkResult(result){
			//result 값이 없어나 히스토리 기록이 없으면 함수종료
			if(result =="" || history.state ){
				return ;
			}
			//result 넘어와서 글 고유번화가 0보다 크면 alert 띄워라
			if(parseInt(result) > 0 ){
				alert(result + "번 글이 등록되었습니다.");
			}
		}
	</script>

</body>
</html>